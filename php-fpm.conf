[global]
error_log = /dev/stderr

[www]
; Run as root (Railway container runs as root by default)
user = root
group = root
listen = 127.0.0.1:9000
; Allow running as root
clear_env = no

; Pass environment variables
env[DB_HOST] = $DB_HOST
env[DB_PORT] = $DB_PORT
env[DB_NAME] = $DB_NAME
env[DB_USER] = $DB_USER
env[DB_PASS] = $DB_PASS

; Process manager settings for maximum performance
pm = dynamic
pm.max_children = 50
pm.start_servers = 10
pm.min_spare_servers = 5
pm.max_spare_servers = 20
pm.max_requests = 500

; Logging
access.log = /dev/stdout
catch_workers_output = yes

; PHP settings
php_value[opcache.enable] = 1
php_value[opcache.memory_consumption] = 128
php_value[opcache.max_accelerated_files] = 10000
php_value[opcache.validate_timestamps] = 0
php_value[opcache.revalidate_freq] = 0
php_value[opcache.interned_strings_buffer] = 16
